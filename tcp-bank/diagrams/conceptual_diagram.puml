@startuml
!theme plain
skinparam componentStyle rectangle

title Bankovní Server

node "Klientská zóna" {
    [PuTTY / Telnet Client] as Client
}

node "Bankovní Server (Node.js)" {

    component "TCP Server (net module)" as NetLayer
    component "Network Monitor" as Monitor

    package "Command System (src/commands/)" as Logic {
        [Command Registry] as Registry
        [Command Classes] as CmdClasses
    }

    component "Config Manager" as Config
    component "Log Manager (Winston)" as Logger
    component "FileSystem Provider (fs/promises)" as FS

    database "Account Storage" as Storage {
        [Account Files (*.txt)]
    }
}

file "app_config.json" as ConfigFile
file "bank.log" as LogFile

Client --> NetLayer : TCP/IP (Raw Text utf8)
NetLayer <--> Registry : Předání příkazů
NetLayer --> Monitor : Kontrola sítě
Logic --> Config : Načítá timeouty/port
Config ..> ConfigFile : Čte JSON

Logic --> FS : CRUD operace účtů
FS <--> Storage : Čtení/Zápis zůstatku
Logic --> Logger : Loguje události
Logger ..> LogFile : Rotující zápis

note right of CmdClasses
  Modulární struktura:
  Každý příkaz (BC, AC, AD, AW, AB,
  AR, BA, BN, exit) má vlastní třídu
end note

note bottom of Logger
  Log Rotation:
  Max size, Max files, Daily rotate
end note

@enduml